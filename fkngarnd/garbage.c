

void main() {
	reset_screen();

	char battery = get_battery_level();
	PUT_COMPTIME_STR("battery level: ");
	put_char_as_num(battery);
	new_line();

	int ram = get_free_ram_bytes();
	PUT_COMPTIME_STR("free ram: ")
	put_int(ram);
	new_line();

	// { // this code causes a memory error after the program exits

	// 	char autogenerated_str_110738937_0[] = {53, 46, 32, 40, 53, 32, 116, 111, 99, 104, 107, 105, 41, 32, 75, 97, 107, 118, 111, 32, 112, 114, 101, 100, 115, 116, 97, 118, 108, 113, 118, 97, 116, 32, 109, 114, 101, 106, 105, 116, 101, 32, 115, 32, 115, 32, 109, 97, 114, 115, 104, 114, 117, 116, 105, 122, 105, 114, 97, 110, 101, 32, 110, 97, 32, 100, 117, 108, 106, 105, 110, 97, 32, 110, 97, 32, 118, 117, 108, 110, 97, 116, 97, 32, 87, 97, 118, 101, 108, 101, 110, 103, 116, 104, 32, 82, 111, 117, 116, 101, 100, 32, 78, 101, 116, 119, 111, 114, 107, 115, 44, 32, 87, 82, 78, 63};
	// 	char autogenerated_str_110738937_1[] = {84, 101, 122, 105, 32, 109, 114, 101, 106, 105, 32, 105, 109, 97, 116, 32, 112, 111, 116, 101, 110, 99, 105, 97, 108, 97, 32, 100, 97, 32, 105, 122, 98, 101, 103, 110, 97, 116, 32, 112, 114, 111, 98, 108, 101, 109, 105, 116, 101, 32, 118, 32, 66, 38, 83, 32, 109, 114, 101, 106, 105, 116, 101, 58, 32, 124, 124, 124, 32, 108, 105, 112, 115, 97, 116, 97, 32, 110, 97, 32, 112, 111, 118, 116, 111, 114, 110, 97, 32, 117, 112, 111, 116, 114, 101, 98, 97, 32, 110, 97, 32, 100, 117, 108, 106, 105, 110, 97, 116, 97, 32, 110, 97, 32, 118, 117, 108, 110, 97, 116, 97, 44, 32, 122, 97, 103, 117, 98, 105, 116, 101, 32, 111, 116, 32, 114, 97, 122, 100, 101, 108, 113, 110, 101, 116, 111, 32, 110, 97, 32, 109, 111, 115, 104, 116, 110, 111, 115, 116, 116, 97, 32, 105, 32, 109, 97, 115, 104, 116, 97, 98, 105, 114, 117, 101, 109, 111, 115, 116, 32, 100, 111, 32, 87, 65, 78, 46, 32, 124, 124, 124, 32, 87, 82, 78, 32, 115, 101, 32, 115, 117, 115, 116, 111, 105, 32, 111, 116, 32, 109, 97, 114, 115, 104, 114, 117, 116, 105, 122, 105, 114, 97, 115, 104, 116, 105, 32, 40, 105, 108, 105, 32, 98, 97, 105, 112, 97, 115, 41, 32, 118, 117, 122, 108, 105, 44, 32, 115, 118, 117, 114, 122, 97, 110, 105, 32, 112, 111, 109, 101, 106, 100, 117, 32, 115, 105, 32, 115, 32, 118, 108, 97, 107, 110, 101, 115, 116, 105, 32, 118, 114, 117, 122, 107, 105, 32, 118, 32, 112, 114, 111, 105, 122, 118, 111, 108, 110, 97, 32, 116, 111, 112, 111, 108, 111, 103, 105, 113, 32, 110, 97, 32, 109, 114, 101, 106, 97, 116, 97, 46, 32, 124, 124, 124, 32, 75, 114, 97, 105, 110, 105, 113, 116, 32, 112, 111, 116, 114, 101, 98, 105, 116, 101, 108, 115, 107, 105, 32, 118, 117, 122, 101, 108, 32, 101, 32, 115, 118, 117, 114, 122, 97, 110, 32, 107, 117, 109, 32, 109, 114, 101, 106, 111, 118, 32, 118, 117, 122, 101, 108, 32, 99, 104, 114, 101, 122, 32, 111, 112, 116, 105, 99, 104, 110, 97, 32, 118, 114, 117, 122, 107, 97, 46, 32, 124, 124, 124, 32, 86, 115, 101, 107, 105, 32, 107, 114, 97, 101, 110, 32, 118, 117, 122, 101, 108, 32, 101, 32, 111, 98, 111, 114, 117, 100, 118, 97, 110, 32, 115, 32, 110, 97, 98, 111, 114, 32, 111, 116, 32, 111, 112, 116, 105, 99, 104, 110, 105, 32, 112, 114, 101, 100, 97, 118, 97, 116, 101, 108, 105, 32, 105, 32, 112, 114, 105, 101, 109, 110, 105, 99, 105, 32, 122, 97, 32, 105, 122, 112, 114, 97, 115, 104, 116, 97, 110, 101, 32, 110, 97, 32, 100, 97, 110, 110, 105, 32, 118, 32, 109, 114, 101, 106, 97, 116, 97, 32, 105, 32, 112, 111, 108, 117, 99, 104, 97, 118, 97, 110, 101, 32, 110, 97, 32, 100, 97, 110, 110, 105, 32, 111, 116, 32, 109, 114, 101, 106, 97, 116, 97, 44, 32, 115, 117, 111, 116, 118, 101, 116, 110, 111, 32, 109, 111, 106, 101, 32, 100, 97, 32, 115, 101, 32, 114, 101, 103, 117, 108, 105, 114, 97, 116, 32, 112, 111, 32, 100, 117, 108, 106, 105, 110, 97, 32, 110, 97, 32, 118, 117, 108, 110, 97, 116, 97, 46};
	// 	char *pairs_vupros_otgovor[] = {autogenerated_str_110738937_0, autogenerated_str_110738937_1};
	// 	int pairs_vupros_otgovor_lens[] = {116, 604};

	// 	for(char i=0; i<LENOF(pairs_vupros_otgovor)/2; ++i){
	// 		char *vupros = pairs_vupros_otgovor[i];
	// 		char *otgovor = pairs_vupros_otgovor[i+1];

	// 		int vupros_len = pairs_vupros_otgovor_lens[i];
	// 		int otgovor_len = pairs_vupros_otgovor_lens[i+1];

	// 		reset_screen();

	// 		PUT_COMPTIME_STR("QUESTION");
	// 		new_line();

	// 		put_multiline_str(vupros, vupros_len);
	// 		new_line();

	// 		PUT_COMPTIME_STR("show answer?");
	// 		char show_answer = get_yes_or_no();

	// 		if(!show_answer){
	// 			continue;
	// 		}

	// 		reset_screen();

	// 		PUT_COMPTIME_STR("ANSWER");
	// 		new_line();

	// 		put_multiline_str(otgovor, otgovor_len);
	// 		new_line();

	// 		PUT_COMPTIME_STR("PRES KEY 4 NEXT QUESTION");
	// 		get_sk_blk();
	// 		new_line();
	// 	}
	// }

	// {
	// 	PUT_COMPTIME_STR("enter:");

	// 	char data[30];
	// 	int written = GET_STR(data);

	// 	PUT_COMPTIME_STR("got:")
	// 	put_str(data, written);
	// 	new_line();
	// }

	new_line();
	PUT_COMPTIME_STR("press any key to exit");
	// new_line();
	// PUT_COMPTIME_STR("and totally clear RAM");
	get_sk_blk();

	// // it sucks that we have to do this, but the RAM gets corrupted for some reason
	// total_ram_reset();
}









// // I hate this
// void put_bad_multiline_str(char *str){
// 	char new_lines_put = 0;

// 	for(;;){
// 		char ch = *str++;

// 		if(ch == 0){
// 			break;
// 		}

// 		char cur_x = get_cur_x();
// 		char no_more_space = !screen_check_x_if_enough_space_for_1_more_char(cur_x);
// 		char char_is_new_line = ch == '\n';

// 		if(no_more_space || char_is_new_line){
// 			new_line();
// 			new_lines_put += 1;
// 			if(new_lines_put >= PUT_MULTILINE_STR_PAUSE_EVERY_N_LINES){
// 				new_lines_put = 0;
// 				PUT_COMPTIME_STR("press key to keep going");
// 				get_sk_blk();
// 				clear_line();
// 			}
// 		}

// 		if(!char_is_new_line){
// 			put_char(ch);
// 		}
// 	}
// }







// outputs a regular C string that end with 0
// this doesn't seem to be much faster than manually doing a loop in C
void put_bad_str(char *str) __naked{
	// kato vidq .asm i vijdam 4e argumenta se slaga v `hl`

	__asm

		push hl

		BCALL(_VPutS) // in(HL); out(HL); https://taricorp.gitlab.io/83pa28d/lesson/week2/day11/index.html

		pop hl;

		ret
	__endasm;
}





// time

// // https://wikiti.brandonw.net/index.php?title=83Plus:RAM:8478
// char get_time_sec() __naked{
// 	__asm

// 		push af
// 		push bc
// 		push de
// 		push hl
// 		push ix

// 		BCALL(_getTime)

// 		BCALL(_PopRealO1)

// 		// ld a, (#OP1)
// 		// ld a, (#FPS)

// 		ld hl, #OP1
// 		inc hl
// 		// inc hl
// 		// inc hl
// 		// inc hl
// 		// dec hl
// 		ld a, (hl)

// 		pop ix
// 		pop hl
// 		pop de
// 		pop bc
// 		pop af

// 		ret
// 	__endasm;
// }







// void reset_cur() __naked{
// 	__asm
// 		xor a, a
// 		ld (#penRow), a
// 		ld (#penCol), a
// 		ret
// 	__endasm;
// }








// output - hardcoded letters

// void put_big_A() __naked{
// 	__asm
// 		ld a, #'A'
// 		BCALL(_PutC)
// 		ret
// 	__endasm;
// }

// void put_small_A() __naked{
// 	__asm
// 		ld a, #'A'
// 		BCALL(_VPutMap)
// 		ret
// 	__endasm;
// }












// return test

// char ret_test() {
// 	return 'A';
// }

// it seems that the return value goes to `a`
char ret_test() __naked{
	__asm
		ld a, #'A'
		ret
	__endasm;
}


	PUT_COMPTIME_STR("return test");
	new_line();
	char ret_value = ret_test();
	PUT_COMPTIME_STR("asd value: ");
	put_char(ret_value);
	new_line();
